{"version":3,"sources":["01_main.js"],"names":["game","document","getElementById","root","getContext","Records","main","gameSetting","score","grip","Snake","x","y","cells","startCells","size","dx","dy","Apply","nameEntered","prompt","addEventListener","e","keyActive","target","keyCode","scoreDocument","randomApply","max","Math","floor","random","gameOver","valueScore","ul","append","firstChild","removeChild","fragment","DocumentFragment","i","key","li","createElement","getListContent","clearInterval","interval","innerHTML","setInterval","clearRect","width","height","beginPath","fillStyle","unshift","rect","fill","closePath","drawSnake","j","collision"],"mappings":"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","file":"../js/main.min.js","sourcesContent":["let game = document.getElementById(\"game__canvas\");\nlet root = game.getContext(\"2d\");\n\nlet Records = {}\n\nfunction main(){\n  let gameSetting = {\n    score : 0,\n    grip : 20,\n  };\n  let Snake = {\n    x: 220,\n    y: 220,\n    cells: [],\n    startCells:1,\n    size: 20,\n    dx: 0,\n    dy: 0,\n  };\n  let Apply = {\n    size: 20,\n    x : 120,\n    y : 120\n  };\n  let nameEntered = prompt(\"Enter your name, please:\",'');\n  if(nameEntered === null || nameEntered === \"\") nameEntered = \"Player\";\n\n\n  document.addEventListener('keydown',function(e){\n    keyActive=e.target;\n   if(e.keyCode === 37) {\n    //ArrowLeft\n    Snake.dx = -Snake.size;\n    Snake.dy =0;\n    \n   }\n   if(e.keyCode === 38) {\n    //ArrowUp\n    Snake.dx = 0;\n    Snake.dy = -Snake.size;\n   }\n   if(e.keyCode === 39) {\n    //ArrowRight\n    Snake.dx = Snake.size;\n    Snake.dy = 0;\n   }\n   if(e.keyCode === 40) {\n    //ArrowDown\n    Snake.dx = 0;\n    Snake.dy = Snake.size;\n   }\n  },false);\n\n  let scoreDocument = document.getElementById(\"score\");\n  scoreDocument.innerHTML = gameSetting.score;\n\n\n  function randomApply(max=24){\n    return Math.floor(Math.random() * max);\n  }\n\n  function getListContent() {\n    while (ul.firstChild) {\n      ul.removeChild(ul.firstChild);\n    }\n    let fragment = new DocumentFragment();\n    let i = 0;\n    for(let key in Records) {\n      i++;\n      let li = document.createElement('li');\n      li.append(`${i}. ${key} : ${Records[key]}\\n`);\n      fragment.append(li);\n    }\n    return fragment;\n  }\n\n\n  function gameOver(){\n\n    if( Records[nameEntered] > 0) {\n      let valueScore = Records[nameEntered];\n      if(Records[nameEntered] < gameSetting.score) {\n        Records[nameEntered] = gameSetting.score;\n      } else{\n        Records[nameEntered] = valueScore;\n      }\n    } else {\n      Records[nameEntered] = gameSetting.score;\n    }\n    let listTop = [];\n    ul.append(getListContent());\n    main();\n    clearInterval(interval);\n\n  }\n\n\n  function collision(){\n    if( game.width < Snake.x + Snake.size||\n      0 > Snake.x ||\n      game.height  < Snake.y + Snake.size ||\n      0 > Snake.y ){\n        gameOver();\n    }\n    if(Snake.x === Apply.x && Snake.y === Apply.y){\n      Apply.x=randomApply()*gameSetting.grip;\n      Apply.y=randomApply()*gameSetting.grip;\n      Snake.startCells++;\n      scoreDocument.innerHTML = ++gameSetting.score;\n    }\n    for (let j = 1; j < Snake.startCells; j++) {\n        if(Snake.cells[0].x === Snake.cells[j].x && Snake.cells[0].y === Snake.cells[j].y) {\n            gameOver();\n        }\n    }\n  }\n\n\n\n\n  function drawApply(){\n    root.beginPath();\n    root.rect(Apply.x, Apply.y, Apply.size, Apply.size);\n    root.fillStyle = \"#f00\";\n    root.fill();\n    root.closePath();\n\n  }\n\n\n\n  function drawSnake() {\n    root.beginPath();\n    root.fillStyle = \"green\";\n    Snake.cells.unshift({x:Snake.x, y:Snake.y});\n    root.rect(Snake.x, Snake.y, Snake.size - 1, Snake.size - 1);\n    for (let i = 0; i < Snake.startCells; i++) {\n      createRect(Snake.cells[i].x,Snake.cells[i].y,Snake.size - 1,Snake.size - 1); \n    }\n    root.fill();\n    root.closePath();\n  }\n\n\n  function createRect(x,y,width,height){\n     root.rect(x, y, width, height);\n  }\n\n\n  function draw() {\n    root.clearRect(0, 0, game.width, game.height);\n    drawSnake();\n    collision();\n    drawApply();\n    Snake.x+= Snake.dx;\n    Snake.y+= Snake.dy;\n  }\n\n  let interval = setInterval(draw, 1000 / (10 + gameSetting.score * 2 ));\n}\n\nmain();"]}